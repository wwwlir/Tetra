<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">import com.haulmont.cuba.core.global.ViewRepository;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">import com.haulmont.cuba.core.global.View;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">//@Inject</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">//private ViewRepository vRep;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">ViewRepository vRep = AppBeans.get(ViewRepository.NAME)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">View contragentView = vRep.getView(Contragent.class, &quot;_minimal&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">contragentView.addProperty(&quot;inn&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">contragentView.addProperty(&quot;hasWasteGenerationProject&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">contragentView.addProperty(&quot;notUseReductionFactor&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">contragentView.addProperty(&quot;realEstates&quot;, vRep.getView(ContragentRealEstate.class, &quot;_minimal&quot;));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">contragentView.addProperty(&quot;wasteGenerationProjects&quot;, vRep.getView(WasteGenerationProject.class, &quot;_minimal&quot;));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">contragentView.addProperty(&quot;legalAddress&quot;);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">//View creView = new View(ContragentRealEstate.class);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">View creView = vRep.getView(ContragentRealEstate.class, &quot;_minimal&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">creView.addProperty(&quot;realEstate&quot;, vRep.getView(RealEstate.class, &quot;_minimal&quot;));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">//creView.addProperty(&quot;containerYards&quot;,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">//  vRep.getView(RealEstateContainerYard.class, &quot;_minimal&quot;)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">//    .addProperty(&quot;containerYard&quot;,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">//      vRep.getView(ContainerYard.class, &quot;_minimal&quot;))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">// );</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">View containerYardsView = vRep.getView(RealEstateContainerYard.class, &quot;_minimal&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">containerYardsView.addProperty(&quot;containerYard&quot;, vRep.getView(ContainerYard.class, &quot;_minimal&quot;));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">creView.addProperty(&quot;containerYards&quot;, containerYardsView);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">View wgpView = vRep.getView(WasteGenerationProject.class, &quot;_base&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">wgpView.addProperty(&quot;realEstates&quot;, vRep.getView(ContragentRealEstate.class, &quot;_minimal&quot;));</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6; background-color:#2b2b2b;">View.ViewParams viewParam = </span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">new </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">View.ViewParams().entityClass(Payment.</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">class</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">).name(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;_local&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">;<br /></span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">viewParam.</span><span style=" font-family:'DejaVu Sans Mono'; color:#9876aa;">includeSystemProperties </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">= </span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">true;<br /></span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">View view = </span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">new </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">View(viewParam)</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6; background-color:#2b2b2b;">LoadContext&lt;Payment&gt; loadContext = LoadContext.</span><span style=" font-family:'DejaVu Sans Mono'; font-style:italic; color:#a9b7c6;">create</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">(Payment.</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">class</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .setQuery(LoadContext.</span><span style=" font-family:'DejaVu Sans Mono'; font-style:italic; color:#a9b7c6;">createQuery</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;select p from rtneo$Payment p where p.inn = :inn and p.updateTs &lt; '25.11.2019'&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />                .setParameter(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;inn&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#9876aa;">contract</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">.getContragent().getInn()))<br />        .setView(</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">new </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">View(Payment.</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">class, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;_local&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, true</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)).setSoftDeletion(</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">true</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">;<br />return </span><span style=" font-family:'DejaVu Sans Mono'; color:#9876aa;">dataManager</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">.loadList(loadContext)</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">;</span></p></body></html>