<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#2b2b2b;"><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6; background-color:#2b2b2b;">List&lt;Contract&gt; contracts = </span><span style=" font-family:'DejaVu Sans Mono'; color:#9876aa;">dataManager</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">.load(Contract.</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">class</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .query(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;select c from rtneo$Contract c where c.contragent.id = :contragent and c.mainContract.id = :mainContract and c.accepted is not null and c.accepted = true and c.from &lt;= :contractFrom and c.id &lt;&gt; :currentContract or c.id = :mainContract order by c.from desc&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .setParameters(ParamsMap.</span><span style=" font-family:'DejaVu Sans Mono'; font-style:italic; color:#a9b7c6;">of</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;contragent&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getContragent().getId()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;mainContract&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getMainContract().getId()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;contractFrom&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getFrom()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;currentContract&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getId()))<br />        .view(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;_local&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .list()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">;<br /></span><span style=" font-family:'DejaVu Sans Mono'; color:#808080;">//entity</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu Sans Mono'; color:#808080; background-color:#2b2b2b;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#2b2b2b;"><span style=" font-family:'DejaVu Sans Mono'; color:#808080;">//Без даты</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#2b2b2b;"><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6; background-color:#2b2b2b;">List&lt;Contract&gt; contracts = </span><span style=" font-family:'DejaVu Sans Mono'; color:#9876aa;">dataManager</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">.load(Contract.</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">class</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .query(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;select c from rtneo$Contract c where c.contragent.id = :contragent and c.mainContract.id = :mainContract and c.accepted is not null and c.accepted = true and c.id &lt;&gt; :currentContract or c.id = :mainContract order by c.from asc&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .setParameters(ParamsMap.</span><span style=" font-family:'DejaVu Sans Mono'; font-style:italic; color:#a9b7c6;">of</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;contragent&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getContragent().getId()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;mainContract&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getMainContract().getId()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;currentContract&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getId()))<br />        .view(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;_local&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .list()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">;<br /></span><span style=" font-family:'DejaVu Sans Mono'; color:#808080;">//entity\</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu Sans Mono'; color:#808080; background-color:#2b2b2b;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#2b2b2b;"><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6; background-color:#2b2b2b;">List&lt;Bill&gt; bills = </span><span style=" font-family:'DejaVu Sans Mono'; color:#9876aa;">dataManager</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">.load(Bill.</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">class</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .query(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;select b from rtneo$Bill b where b.contract.id in (select c.id from rtneo$Contract c where c.contragent.id = :contragent and c.mainContract.id = :mainContract and c.accepted is not null and c.accepted = true and c.id &lt;&gt; :currentContract or c.id = :mainContract) order by b.contract.from asc&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .setParameters(ParamsMap.</span><span style=" font-family:'DejaVu Sans Mono'; font-style:italic; color:#a9b7c6;">of</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;contragent&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getContragent().getId()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;mainContract&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getMainContract().getId()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;currentContract&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getId()))<br />        .view(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;_local&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .list()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#2b2b2b;"><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">//С датами</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#2b2b2b;"><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6; background-color:#2b2b2b;">List&lt;Bill&gt; bills = </span><span style=" font-family:'DejaVu Sans Mono'; color:#9876aa;">dataManager</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">.load(Bill.</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">class</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .query(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;select b from rtneo$Bill b where b.contract.id in (select c.id from rtneo$Contract c where c.contragent.id = :contragent and c.mainContract.id = :mainContract and c.accepted is not null and c.accepted = true and c.id &lt;&gt; :currentContract or c.id = :mainContract) and b.period &gt;= :periodStart and b.period &lt;= :periodEnd order by b.contract.from asc&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .setParameters(ParamsMap.</span><span style=" font-family:'DejaVu Sans Mono'; font-style:italic; color:#a9b7c6;">of</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;contragent&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getContragent().getId()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;mainContract&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getMainContract().getId()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;currentContract&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getId()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;periodStart&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getFrom()</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;periodEnd&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#cc7832;">, </span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">entity.getBefore()))<br />        .view(</span><span style=" font-family:'DejaVu Sans Mono'; color:#6a8759;">&quot;_local&quot;</span><span style=" font-family:'DejaVu Sans Mono'; color:#a9b7c6;">)<br />        .list()</span></p></body></html>