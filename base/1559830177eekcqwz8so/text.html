<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Использование fbset в реальной жизни</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Котельников Руслан, 30.04.03<br /><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Frame buffer позволяет делать удивительные вещи с консолью. На первый взгляд данный модуль не является особенно необходимым и без этого можно прекрасно работать. Но как только вы станете интенсивно работать с консолью, то возникает необходимость иметь более, чем 25 строк и 80 столбцов. Каково, что простаивают мощности вашей новой видеокарты, ведь с консолью может справиться любая старая видеокарта с поддержкой vga. Что делать и как заставить Linux использовать все возможности? На помощь приходит frame buffer и дает нам возможность работать с консолью, как подобает. <br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ну, хватит теории - перейдем к практике. Заставим все работать, предупреждаю сразу - возможно вам придется перекомпилировать ядро, но сейчас это не просто просто, а очень просто. Итак, в начале необходимо проверить, есть ли возможность у вас в ядре работать с frame buffer. Для этого вам необходимо зайти в каталог, где у вас <br />хранятся исходники ядра или предварительно установить их (обычно это /usr/src/linux-2.xx.xx) и дать команду: </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">make menuconfig </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">после нескольких секунд перед вами уже вся конфигурация компьютера. Заходите по пути Console drivers-&gt;frame buffer-&gt;ваш драйвер ставите звездочку напротив. Так же установите Video Mode Selection и VGA text console. Затем <br />даёте следующие команды: </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">make <br />make modules </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">И если не было ошибок, то </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">make install <br />make modules_install </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В зависимости от дистрибутива вам этого достаточно или же придется делать все вручную, но это - тема отдельной статьи. После этого вам необходимо проверить, установлена ли программа fbset. Для этого просто дайте команду из-под root: </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">fbset </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">если у вас нет данной программы, то посмотрите на дисках вашего дистрибутива, скорее всего данная программа уже входит в дистрибутив. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для того, чтобы узнать, какие режимы поддерживает ваша система, взгляните в файл </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">vi /etc/fb.modes </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">и вот теперь, наконец, можно насладиться всеми возможностями видеокарты: </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">fbset &quot;800x600-60&quot; </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">А можно смотреть видео из консоли без всяких старых и медленных svga: </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">mplayer video.avi -vo fbdev -bpp 32 </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для сравнения - svga поддерживает только bpp 8. Дерзайте и используйте консоль, только она позволяет насладиться работой с консолью полностью. </p></body></html>