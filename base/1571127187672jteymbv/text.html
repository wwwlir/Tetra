<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">import com.groupstp.rtneo.entity.*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">import com.haulmont.cuba.core.global.*;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">import java.util.*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">import com.haulmont.cuba.core.global.ViewRepository;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Serif'; font-weight:600; color:#6a1009;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Serif'; font-weight:600; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">DataManager dataManager = AppBeans.get(DataManager.NAME)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Serif'; font-weight:600; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">ViewRepository vRep = AppBeans.get(ViewRepository.NAME)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">View renterView = vRep.getView(RealEstateRenter.class, &quot;_minimal&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">renterView.addProperty(&quot;renterRecord&quot;, vRep.getView(ContragentRealEstate.class, &quot;_minimal&quot;).addProperty(&quot;contragent&quot;, vRep.getView(Contragent.class, &quot;_local&quot;)));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">renterView.addProperty(&quot;contragent&quot;, vRep.getView(Contragent.class, &quot;_local&quot;));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">renterView.addProperty(&quot;contragentRealEstate&quot;, vRep.getView(ContragentRealEstate.class, &quot;contragentRealEstate-categorization&quot;).addProperty(&quot;contragent&quot;, vRep.getView(Contragent.class, &quot;_local&quot;)));</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Serif'; font-weight:600; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">List&lt;RealEstateRenter&gt; listRenters = dataManager.load(RealEstateRenter.class)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">        .query('select r from rtneo$RealEstateRenter r')</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">        .view(renterView)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">        .list();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Serif'; font-weight:600; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">//List&lt;RealEstateRenter&gt; listRenters = dataManager.load(RealEstateRenter.class)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">//        .query('select r from rtneo$RealEstateRenter r where r.contragentRealEstate.id = :id')</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">//        .parameter(&quot;id&quot;, UUID.fromString(&quot;1873a881-aaf8-cbc6-316a-74fbb0760c8b&quot;))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">//        .view(renterView)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">//        .list();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Serif'; font-weight:600; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">def count = 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">def countNull = 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">def allNull = 0;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Serif'; font-weight:600; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">log.debug(listRenters.size());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">for(RealEstateRenter renter:listRenters){</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Serif'; font-weight:600; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">    if(renter.getRenterRecord() != null &amp;&amp; renter.getRenterRecord().isDeleted()){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">        count++;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">        log.debug(&quot;${renter.getContragentRealEstate().getRealEstate().getCadastralNumber()}  Contragent - ${renter.getContragentRealEstate().getContragent().getInn()}(${renter.getContragentRealEstate().getContragent().getName()}), renter - ${renter.getContragent().getInn()}(${renter.getContragent().getName()})&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">    if(renter.getRenterRecord() == null){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">        allNull++;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">        if(renter.getContragentRealEstate() != null){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">            log.debug(&quot;${renter.getContragentRealEstate().getRealEstate().getCadastralNumber()}  Contragent - ${renter.getContragentRealEstate().getContragent().getInn()}(${renter.getContragentRealEstate().getContragent().getName()}), renter - null)&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">        }else{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">            log.debug(&quot;RenterRecord and CRE is null - renter id = ${renter.getId()}&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">    if(renter.getContragentRealEstate() == null){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">        log.debug(&quot;CRE is null, renter - ${renter.getContragent().getInn()}(${renter.getContragent().getName()}), renter id = ${renter.getId()}&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">        countNull++;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Serif'; font-weight:600; color:#6a1009;">log.debug(&quot;RESULT = ${count}, countNull = ${countNull}, allNull = ${allNull}&quot;)</span></p></body></html>